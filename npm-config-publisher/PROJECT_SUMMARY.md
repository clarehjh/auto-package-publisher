# npm-config-publisher é¡¹ç›®æ€»ç»“

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

`npm-config-publisher` æ˜¯ä¸€ä¸ªå¼ºå¤§çš„é…ç½®åŒ– NPM åŒ…å‘å¸ƒå·¥å…·ï¼Œä¸“ä¸º CI/CD ç¯å¢ƒå’Œå¤šåŒ…é¡¹ç›®ç®¡ç†è€Œè®¾è®¡ã€‚å®ƒé€šè¿‡ JSON é…ç½®æ–‡ä»¶ç®¡ç†å‘å¸ƒæµç¨‹ï¼Œæ”¯æŒæ‰¹é‡å‘å¸ƒã€ç‰ˆæœ¬ç®¡ç†ã€ç¯å¢ƒå˜é‡æ›¿æ¢ç­‰é«˜çº§åŠŸèƒ½ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
npm-config-publisher/
â”œâ”€â”€ src/                          # æºä»£ç 
â”‚   â””â”€â”€ index.js                 # ä¸»å‘å¸ƒå™¨ç±»
â”œâ”€â”€ bin/                         # å‘½ä»¤è¡Œå·¥å…·
â”‚   â””â”€â”€ cli.js                   # CLIå…¥å£æ–‡ä»¶
â”œâ”€â”€ examples/                    # ç¤ºä¾‹é…ç½®
â”‚   â”œâ”€â”€ basic-config.json        # åŸºç¡€é…ç½®ç¤ºä¾‹
â”‚   â”œâ”€â”€ monorepo-config.json     # Monorepoé…ç½®ç¤ºä¾‹
â”‚   â””â”€â”€ quick-start.md           # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ templates/                   # æ¨¡æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ github-actions.yml       # GitHub Actionsæ¨¡æ¿
â”‚   â””â”€â”€ github-actions-monorepo.yml # Monorepo Actionsæ¨¡æ¿
â”œâ”€â”€ docs/                        # æ–‡æ¡£
â”‚   â”œâ”€â”€ usage.md                 # ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ ci-cd.md                 # CI/CDé›†æˆæŒ‡å—
â”‚   â”œâ”€â”€ troubleshooting.md      # æ•…éšœæ’é™¤
â”‚   â””â”€â”€ environment.md           # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ package.json                 # é¡¹ç›®é…ç½®
â”œâ”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
â””â”€â”€ install.sh                   # å®‰è£…è„šæœ¬
```

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1. é…ç½®åŒ–å‘å¸ƒ

- JSON é…ç½®æ–‡ä»¶ç®¡ç†å‘å¸ƒæµç¨‹
- æ”¯æŒå¤šåŒ…æ‰¹é‡å‘å¸ƒ
- ç¯å¢ƒå˜é‡æ›¿æ¢å’Œæ¡ä»¶å‘å¸ƒ

### 2. CLI å·¥å…·

- äº¤äº’å¼é…ç½®åˆå§‹åŒ–
- å‘½ä»¤è¡Œå‘å¸ƒå’ŒéªŒè¯
- ç‰ˆæœ¬ç®¡ç†å’Œè¯•è¿è¡Œæ¨¡å¼

### 3. CI/CD é›†æˆ

- GitHub Actions å·¥ä½œæµæ¨¡æ¿
- GitLab CI é…ç½®ç¤ºä¾‹
- æ”¯æŒå¤šç§ CI/CD å¹³å°

### 4. é«˜çº§ç‰¹æ€§

- è‡ªåŠ¨ç‰ˆæœ¬é€’å¢
- åŒ…ç»“æ„éªŒè¯
- å‘å¸ƒå†å²è·Ÿè¸ª
- é”™è¯¯å¤„ç†å’Œé‡è¯•

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Node.js**: è¿è¡Œæ—¶ç¯å¢ƒ
- **Commander.js**: å‘½ä»¤è¡Œå·¥å…·æ¡†æ¶
- **Inquirer.js**: äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢
- **Chalk**: ç»ˆç«¯é¢œè‰²è¾“å‡º
- **fs-extra**: æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
- **semver**: è¯­ä¹‰åŒ–ç‰ˆæœ¬ç®¡ç†

## ğŸš€ ä½¿ç”¨åœºæ™¯

### 1. å•åŒ…å‘å¸ƒ

é€‚åˆå•ä¸ª NPM åŒ…çš„å‘å¸ƒç®¡ç†ï¼Œæ”¯æŒç‰ˆæœ¬æ§åˆ¶å’Œè‡ªåŠ¨åŒ–å‘å¸ƒã€‚

### 2. Monorepo ç®¡ç†

æ”¯æŒåŒ…å«å¤šä¸ªåŒ…çš„ monorepo é¡¹ç›®ï¼Œå¯ä»¥æ‰¹é‡å‘å¸ƒå˜æ›´çš„åŒ…ã€‚

### 3. CI/CD é›†æˆ

ä¸ GitHub Actionsã€GitLab CI ç­‰ CI/CD å¹³å°æ— ç¼é›†æˆï¼Œå®ç°è‡ªåŠ¨åŒ–å‘å¸ƒã€‚

### 4. ä¼ä¸šçº§å‘å¸ƒ

æ”¯æŒç§æœ‰ NPM ä»“åº“ã€æƒé™ç®¡ç†ã€å‘å¸ƒå®¡æ‰¹ç­‰ä¼ä¸šçº§åŠŸèƒ½ã€‚

## ğŸ“Š é…ç½®ç¤ºä¾‹

### åŸºç¡€é…ç½®

```json
{
  "packages": [
    {
      "name": "my-package",
      "version": "1.0.0",
      "path": "./dist",
      "registry": "https://registry.npmjs.org/",
      "access": "public"
    }
  ],
  "auth": {
    "npm": {
      "token": "${NPM_TOKEN}"
    }
  },
  "options": {
    "dryRun": false,
    "skipExisting": true
  }
}
```

### Monorepo é…ç½®

```json
{
  "packages": [
    {
      "name": "@myorg/ui",
      "version": "1.2.3",
      "path": "./packages/ui/dist"
    },
    {
      "name": "@myorg/utils",
      "version": "2.0.1",
      "path": "./packages/utils/dist"
    }
  ],
  "auth": {
    "npm": {
      "token": "${NPM_TOKEN}"
    }
  },
  "options": {
    "skipExisting": true,
    "parallel": false
  }
}
```

## ğŸ”„ CI/CD é›†æˆ

### GitHub Actions

```yaml
name: Publish to NPM
on:
  push:
    tags: ["v*"]

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: "18"
      - run: npm ci
      - run: npm run build
      - run: npm install -g npm-config-publisher
      - run: npm-config-publish publish --config .github/publish-config.json
        env:
          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
```

## ğŸ¯ ä¼˜åŠ¿ç‰¹ç‚¹

### 1. é…ç½®åŒ–

- é€šè¿‡ JSON é…ç½®æ–‡ä»¶ç®¡ç†å‘å¸ƒæµç¨‹
- æ”¯æŒç¯å¢ƒå˜é‡å’Œæ¡ä»¶å‘å¸ƒ
- æ˜“äºç‰ˆæœ¬æ§åˆ¶å’Œå›¢é˜Ÿåä½œ

### 2. è‡ªåŠ¨åŒ–

- æ”¯æŒ CI/CD é›†æˆ
- è‡ªåŠ¨ç‰ˆæœ¬é€’å¢
- æ‰¹é‡å‘å¸ƒå’Œå¹¶è¡Œå¤„ç†

### 3. å®‰å…¨æ€§

- ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯
- æ”¯æŒå¤šç§è®¤è¯æ–¹å¼
- æƒé™æ§åˆ¶å’Œè®¿é—®ç®¡ç†

### 4. å¯æ‰©å±•æ€§

- æ¨¡å—åŒ–è®¾è®¡
- æ”¯æŒè‡ªå®šä¹‰é’©å­
- æ˜“äºæ‰©å±•å’Œå®šåˆ¶

## ğŸ“ˆ ä½¿ç”¨æµç¨‹

### 1. å®‰è£…

```bash
npm install -g npm-config-publisher
```

### 2. åˆå§‹åŒ–

```bash
npm-config-publish init
```

### 3. é…ç½®

ç¼–è¾‘ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®åŒ…ä¿¡æ¯å’Œè®¤è¯ä¿¡æ¯ã€‚

### 4. å‘å¸ƒ

```bash
npm-config-publish publish
```

## ğŸ”§ å‘½ä»¤è¡Œå·¥å…·

### åŸºæœ¬å‘½ä»¤

- `init`: åˆå§‹åŒ–é…ç½®æ–‡ä»¶
- `publish`: å‘å¸ƒåŒ…åˆ° NPM
- `validate`: éªŒè¯é…ç½®æ–‡ä»¶
- `version`: ç‰ˆæœ¬ç®¡ç†

### é€‰é¡¹

- `--config`: æŒ‡å®šé…ç½®æ–‡ä»¶
- `--dry-run`: è¯•è¿è¡Œæ¨¡å¼
- `--type`: ç‰ˆæœ¬ç±»å‹

## ğŸ“š æ–‡æ¡£ä½“ç³»

### 1. ä½¿ç”¨æŒ‡å—

- åŸºæœ¬é…ç½®å’Œä½¿ç”¨æ–¹æ³•
- é«˜çº§åŠŸèƒ½å’Œè‡ªå®šä¹‰é€‰é¡¹
- æœ€ä½³å®è·µå’Œæ³¨æ„äº‹é¡¹

### 2. CI/CD é›†æˆ

- GitHub Actions é…ç½®
- GitLab CI é›†æˆ
- å…¶ä»– CI/CD å¹³å°æ”¯æŒ

### 3. æ•…éšœæ’é™¤

- å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
- è°ƒè¯•æŠ€å·§å’Œå·¥å…·
- é”™è¯¯ç å’Œæ—¥å¿—åˆ†æ

### 4. ç¯å¢ƒé…ç½®

- ç¯å¢ƒå˜é‡è®¾ç½®
- å®‰å…¨æœ€ä½³å®è·µ
- å¤šç¯å¢ƒç®¡ç†

## ğŸ‰ é¡¹ç›®ä»·å€¼

### 1. æé«˜æ•ˆç‡

- è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹
- å‡å°‘æ‰‹åŠ¨æ“ä½œé”™è¯¯
- æ”¯æŒæ‰¹é‡å¤„ç†

### 2. æ ‡å‡†åŒ–

- ç»Ÿä¸€çš„å‘å¸ƒæµç¨‹
- æ ‡å‡†åŒ–çš„é…ç½®æ ¼å¼
- å›¢é˜Ÿåä½œè§„èŒƒ

### 3. å¯ç»´æŠ¤æ€§

- é…ç½®åŒ–ç®¡ç†
- ç‰ˆæœ¬æ§åˆ¶å‹å¥½
- æ˜“äºè°ƒè¯•å’Œæ’é”™

### 4. æ‰©å±•æ€§

- æ”¯æŒå¤šç§å‘å¸ƒåœºæ™¯
- æ˜“äºé›†æˆå’Œå®šåˆ¶
- ç¤¾åŒºè´¡çŒ®å‹å¥½

## ğŸš€ æœªæ¥è§„åˆ’

### 1. åŠŸèƒ½å¢å¼º

- æ”¯æŒæ›´å¤šåŒ…ç®¡ç†å™¨
- å¢åŠ å‘å¸ƒå®¡æ‰¹æµç¨‹
- æ”¯æŒå‘å¸ƒå›æ»š

### 2. å¹³å°æ”¯æŒ

- æ”¯æŒæ›´å¤š CI/CD å¹³å°
- é›†æˆæ›´å¤š NPM ä»“åº“
- æ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²

### 3. ç”¨æˆ·ä½“éªŒ

- æ”¹è¿› CLI ç•Œé¢
- å¢åŠ  Web ç®¡ç†ç•Œé¢
- æä¾›å¯è§†åŒ–é…ç½®å·¥å…·

### 4. ç¤¾åŒºå»ºè®¾

- å®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹
- å»ºç«‹è´¡çŒ®æŒ‡å—
- ç»„ç»‡ç¤¾åŒºæ´»åŠ¨

## ğŸ“„ è®¸å¯è¯

MIT License - å…è®¸è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·æŸ¥çœ‹æ–‡æ¡£äº†è§£å¦‚ä½•å‚ä¸é¡¹ç›®å¼€å‘ã€‚

---

**npm-config-publisher** - è®© NPM åŒ…å‘å¸ƒæ›´ç®€å•ã€æ›´å¯é ã€æ›´é«˜æ•ˆï¼ ğŸ‰
